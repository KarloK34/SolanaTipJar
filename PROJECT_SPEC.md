# ðŸš€ Project Specification: Solana Tip Jar App (Updated using Dev Tools)

## 1. Project Overview
We are building a **Solana Tip Jar / Donation App**. It is a Next.js web application that allows users to connect their Solana wallets (Phantom, Solflare, etc.) and send SOL or SPL tokens to a specific creator's address. It also displays a history of recent donations by reading directly from the blockchain.

**Goal:** Create a clean, functional, and modern dApp for the "Blockchain Technologies" university course, demonstrating proficiency with current Solana development best practices.

## 2. Tech Stack & Requirements
* **Framework:** Next.js 14+ (App Router)
* **Language:** TypeScript
* **Styling:** Tailwind CSS
* **Development CLI:** `@solana-developers/create-solana-dapp` (Used for initial setup)
* **Blockchain Interaction Helpers:** `@solana-developer/helpers` (Used for simplified transaction logic)
* **Core Libraries:**
    * `@solana/web3.js`
    * `@solana/wallet-adapter-*`
    * `@solana/spl-token`
* **Network:** Solana Devnet (for testing purposes)
* **Icons:** Lucide React

## 3. Architecture & File Structure
The project will follow the standard structure generated by the CLI tool, augmented with custom hooks and components:

- `/app`: Main application routes
  - `layout.tsx`: Includes WalletContextProviders (set up by CLI)
  - `page.tsx`: Main UI (Hero + Donation Form + History)
- `/components`: UI and Logic components
  - `/providers`: (Already configured by CLI)
  - `/donation`: DonationForm.tsx, TokenSelector.tsx
  - `/history`: TransactionList.tsx
  - `/ui`: Reusable UI components
- `/hooks`: Custom React hooks
  - `useDonation.ts`: Core logic for sending transaction (using helpers)
  - `useHistory.ts`: Logic for fetching transaction history
- `/utils`: Helper functions
  - `constants.ts`: Recipient public key, Token Mint addresses

## 4. Implementation Steps (Cursor Guide)

### Phase 1: Automated Project Setup âœ… COMPLETE
1.  **Skip manual Next.js setup.** Use the official Solana tool:
    `npx @solana/create-solana-dapp`
2.  Follow the CLI prompts: Select **Next.js** and **TypeScript**.
3.  Verify that the project initializes correctly and the basic Wallet connection components are available and functioning.
4.  Install the dedicated helper package:
    `npm install @solana-developer/helpers`

### Phase 2: UI Skeleton & Wallet Connection Validation
1.  Ensure the header includes the functional `<WalletMultiButton />` component.
2.  Design the main application layout (a centered Card or container) to host the Donation Form and History list.
3.  Define the **Recipient Address (Tip Jar Public Key)** in `utils/constants.ts`. (The key obtained from your new Phantom Devnet wallet).

### Phase 3: Core Logic - Simplified SOL Transfer
1.  Create `useDonation.ts` hook.
2.  Implement the `sendSolTip(amount)` function using the `@solana-developer/helpers` package.
    * **Goal:** Use the helper functions (e.g., `transferSol` or similar, depending on the helper's API) to drastically simplify the transaction creation and sending process.
    * The helper should abstract away manual handling of `SystemProgram.transfer` and `Transaction` building.
3.  Create `DonationForm.tsx` to handle user input and call `sendSolTip`.
4.  Implement robust Error Handling (try/catch) and display success/error Toast notifications (e.g., using `sonner`).

### Phase 4: Transaction History (Read-Only)
1.  Create `useHistory.ts` hook.
2.  Use standard `connection.getSignaturesForAddress(recipientPubKey, { limit: 10 })` to fetch transaction signatures for the Tip Jar address.
3.  Parse transaction details to extract sender and amount.
4.  Create `TransactionList.tsx` component to display the history clearly (Sender address masked, Amount, Time).
5.  Add a mechanism to refresh the history list.

### Phase 5: (Optional) SPL Token Support
1.  If time allows, extend the logic in `useDonation.ts` to support specific SPL tokens (e.g., Devnet USDC).
2.  Utilize helper functions for SPL token transfers to avoid complex manual ATA (Associated Token Account) creation and instruction building, if such helpers are available.

## 5. Key Rules for the AI Agent
* **Prioritize Helpers:** When implementing transaction logic (Phase 3 and 5), prioritize using functions from `@solana-developer/helpers` over direct, low-level `@solana/web3.js` code.
* **Client Components:** All components utilizing Solana hooks (`useWallet`, `useConnection`) must be marked with `"use client"`.
* **Type Safety:** Maintain strict TypeScript typing.
* **Error Handling:** Ensure robust try/catch blocks with clear user feedback (Toasts).
* **Styling:** Use Tailwind CSS (Dark mode preferred) for a polished, modern look.